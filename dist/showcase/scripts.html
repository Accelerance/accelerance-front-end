<!--#region scripts and footer includes -->
  {{ standard_footer_includes }}
  <script src='{{ get_public_template_url("Custom/page/ACC2017/CompanyMain.js") }}'></script>
  <script src="https://d3js.org/d3.v5.min.js"></script>
  <script src="{{ get_public_template_url('ACC2018/Showcase/js/c3.js') }}" type="text/javascript"></script>
  <script charset="ISO-8859-1" src="//fast.wistia.com/assets/external/playlist-v1.js"></script>
	<script src="https://unpkg.com/tippy.js@2.5.4/dist/tippy.all.min.js"></script>
  <script type="text/javascript" src="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
  <script defer src="https://use.fontawesome.com/releases/v5.5.0/js/all.js" integrity="sha384-GqVMZRt5Gn7tB9D9q7ONtcp4gtHIUEW/yG7h98J7IpE3kpi+srfFyyB/04OV6pG0" crossorigin="anonymous"></script>
				
<!--#endregion-->

<script>
  //opens people charts
        $('#people-button').click(function() {
        
          setTimeout(function () {
            chart.load({
              columns: [
                  ['data1', {{ partner.junior_developers }}]
              ]
            });
          }, 100);

          setTimeout(function () {
            chart.load({
              columns: [
                  ['data2', {{ partner.senior_developers }}]
              ]
            });
          }, 800);
          
					var loadedColumns = [
            {% if partner.projectManagerCount %}
            ["project_managers", {{ partner.projectManagerCount }}],
            {% endif %}
            {% if partner.productManagerCount %}
            ["product_managers", {{ partner.productManagerCount }}],
            {% endif %}
            {% if partner.businessAnalystCount %}
            ["business_analysts", {{ partner.businessAnalystCount }}],
            {% endif %}
            {% if partner.devopsCount %}
            ["devOps", {{ partner.devopsCount }}],
            {% endif %}
            {% if partner.systemArchitectsCount %}
            ["system_architects", {{ partner.systemArchitectCount }}],
            {% endif %}
            {% if partner.uxUICount %}
            ["uxui", {{ partner.uxUICount }}],
            {% endif %}
            {% if partner.qaTeamCount %}
            ["qa_team", {{ partner.qaTeamCount }}],
            {% endif %}
            {% if partner.developerEngineerCount %}
            ["developers_engineers", {{ partner.developerEngineerCount }}]
            {% endif %}
          ];
          
          setTimeout(function () {
            donut.load({
                columns: loadedColumns,
            });
        }, 1500);
        
        });
  
    //launch assesment chart
    $('#overview-button').click(function() {
      setTimeout(function () {
        guage.load({
            columns: [['data', 95]]
        });
    }, 300);
    });
  
  	//lazyload
    (function (w, d) {
              w.addEventListener('LazyLoad::Initialized', function (e) {
                w.lazyLoadInstance = e.detail.instance;
              }, false);
              var b = d.getElementsByTagName('body')[0];
              var s = d.createElement("script"); s.async = true;
              var v = !("IntersectionObserver" in w) ? "8.11.0" : "10.10.0";
              s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
              w.lazyLoadOptions = {};
              b.appendChild(s);
            }(window, document));
      
      
      //slick
      $(document).ready(function(){
            $('.your-class').slick({
              prevArrow: '<i class="fa fa-chevron-circle-left"></i>',
              nextArrow: '<i class="fa fa-chevron-circle-right"></i>',
              variableWidth: true,
              slidesToShow: 1,
              adaptiveHeight: false
            });
          });
      

      
         //switches tab based on hash value
        (function () {
          
          var allTabs = document.getElementsByClassName('tabcontent');
          
          for (i = 0; i < allTabs.length; i++ ) {
            if (window.location.hash == ('#' + allTabs[i].id)) {
                //all <a><a/> tags that are to be used for nav must have id="tabname-button"
                document.getElementById(allTabs[i].id + '-button').click();
            }
          }
          
          if (window.location.hash == "") {
                document.getElementById("overview-button").click();
          }
          
        }());
  
  {% if badgePage != true %}
      //wistia player script
      overviewPlaylist = Wistia.playlist("{{ partner.capabilities_wistia_id }}", {
        version: "v1",
        theme: "slide",
        autoPlay: false,
        videoOptions: {
          volumeControl: true,
          playerColor: "54bbff",
          autoPlay: true,
          inlineOptionsOnly: true,
          version: "v1"
        },
        videoFoam: "true",
        media_0_0: {
          controlsVisibleOnLoad: false
        },
         slide: {
          ears: false
         }
      });

      
      // {:
      wistiaPlaylist = Wistia.playlist("{{ partner.processes_wistia_id }}", {
        version: "v1",
        theme: "bento",
        videoOptions: {
          volumeControl: true,
          playerColor: "54bbff",
          autoPlay: true,
          videoWidth: "640",
          videoHeight: "360",
          inlineOptionsOnly: true,
          version: "v1"
        },
        videoFoam: "true",
        media_0_0: {
          autoPlay: false,
          controlsVisibleOnLoad: false
        }
      });
  
    {% endif %}

      
      //dev breakdown in c3
      var chart = c3.generate({
          bindto: '#developer_breakdown',
          data: {
            	names: {
              	data1: 'Junior Developers',
                data2: 'Senior Developers'
              },
            	order: null,
            	colors: {
              	data1: '#91BC63',
                data2: '#1FBDE5'
              },
              columns: [
                  ['data1', 0],
                  ['data2', 0]
              ],
              type: 'bar',
            	groups: [['data1', 'data2']],
              tooltip: {
                show: false
            	},
              labels: {
              //format: function (v, id, i, j) { return "Default Format"; },
                format: function (v, id, i, j) { return v; },
                    //data1: function (v, id, i, j) { return "Format for data1"; },
                }
            },
          axis: {
            x: {
            	show: false
            },
            y: {
            	show: false
            },
          	rotated: true
          },
          bar: {
              width: {
                  ratio: 0.5 // this makes bar width 50% of length between ticks
              }
              // or
              //width: 100 // this makes bar width 100px
          },
          transition: {
            duration: 600
        	},
          tooltip: {
            show: false
          }
      	});
      
      	//donut chart from c3
      	var total = {{ partner.projectManagerCount }} + {{ partner.productManagerCount }} + {{ partner.businessAnalystCount }} + {{ partner.devopsCount }} +  {{ partner.systemArchitectCount }} + {{ partner.uxUICount }} + {{ partner.qaTeamCount }} + {{ partner.developerEngineerCount }};
        
        var columns = [
          {% if partner.projectManagerCount %}
          ["project_managers", 0],
          {% endif %}
          {% if partner.productManagerCount %}
          ["product_managers", 0],
          {% endif %}
          {% if partner.businessAnalystCount %}
          ["business_analysts", 0],
          {% endif %}
          {% if partner.devopsCount %}
          ["devOps", 0],
          {% endif %}
          {% if partner.systemArchitectsCount %}
          ["system_architects", 0],
          {% endif %}
          {% if partner.uxUICount %}
          ["uxui", 0],
          {% endif %}
          {% if partner.qaTeamCount %}
          ["qa_team", 0],
          {% endif %}
          {% if partner.developerEngineerCount %}
          ["developers_engineers", 0]
          {% endif %}
        ];
        
        
        var donut = c3.generate({
          bindto: '#employee-distribution',
          transition: {
            duration: 3000
          },
          data: {
              columns: columns,
              names: {
                project_managers: 'Project Managers',
                product_managers: 'Product Managers',
                business_analysts: 'Business Analysts',
                devOps: 'DevOps',
                system_architects: 'System Architects',
                uxui: 'UX/UI Designers',
                qa_team: 'QA Team',
                developers_engineers: 'Developer/Engineers'
              },
              type : 'donut'
          },
          legend: {
              position: 'right'
          },
          donut: {
            label: {
              threshold: 0,
              show: true,
              format: function(v) {
                return v;
              }
            }
          },
          color: {
            pattern: ['#4170EB','#91BC63','#E5C95D', '#B73E43', '#8D2B7C', '#08374A', '#EB4155','#1FBDE5']
          },
          tooltip: {
            show: false,
            format: {
            value: function (value, ratio, id, index) { return value; }
          }
          }
        });

      
      //guage in c3
      var guage = c3.generate({
        bindto: '#guage',
        size: {
          height: 180
        },
        data: {
            columns: [
                ['data', 0]
            ],
            label: {
              show: false
            },
            type: 'gauge'
        },
        tooltip: {
              show: false
            },
        legend: {
          show: false
        },
        gauge: {
          label: {
            show: false
          },
    //    width: 39 // for adjusting arc thickness
        },
        color: {
          pattern: ['#EB4155', '#E5C95D', '#91BC63'], // the three color levels for the percentage values.
          threshold: {
  //            unit: 'value', // percentage is default
  //            max: 200, // 100 is default
              values: [30, 70, 90]
          }
        }
    });
      
      

      //for tooltips and Read more
      tippy('.btn', {
        arrow: true,
        trigger: 'click',
        theme: 'light',
        html: '#myTemplate',
        maxWidth: '690px'
      });
  
  		tippy('#assessment-info', {
        arrow: true,
        trigger: 'click',
        theme: 'light',
        html: '#assessment-description',
        maxWidth: '320px'
      });
      
			{% if partner.technologies|length > 16 %}
        tippy('#technologies-button', {
          arrow: true,
          trigger: 'click',
          theme: 'light',
          html: '#alltechnologies',
          maxWidth: '690px'
        });
      {% endif %}
  
  		tippy('#ramp-up-button', {
        arrow: true,
        trigger: 'click',
        theme: 'light',
        html: '#ramp-up-content',
        maxWidth: '690px'
      });
  
  		tippy('#client-support-button', {
        arrow: true,
        trigger: 'click',
        theme: 'light',
        html: '#client-support-content',
        maxWidth: '690px'
      });
  
  		{% if partner.process|length > 399 %}
        tippy('#sdlc-process-button', {
          arrow: true,
          trigger: 'click',
          theme: 'light',
          html: '#sdlc-process-content',
          maxWidth: '690px'
        });
      {% endif %}
  
  		{% if partner.communication|length > 399 %}
        tippy('#communication-button', {
          arrow: true,
          trigger: 'click',
          theme: 'light',
          html: '#communication-content',
          maxWidth: '690px'
        });
      {% endif %}

      {% if partner.industries|length > 5 %}
        tippy('#industries-button', {
          arrow: true,
          trigger: 'click',
          theme: 'light',
          html: '#allindustries',
          maxWidth: '690px'
        });
      {% endif %}
  
      {% if partner.ownership|length > 499 %}
        tippy('#ownership-button', {
          arrow: true,
          trigger: 'click',
          theme: 'light',
          html: '#allownership',
          maxWidth: '690px'
        });
      {% endif %}
  
      {% if partner.hiring_retention_practices|length > 799 %}
        tippy('#hiringretentionpractices-button', {
          arrow: true,
          trigger: 'click',
          theme: 'light',
          html: '#allhiringretentionpractices',
          maxWidth: '690px'
        });
      {% endif %}
  
    {% if partner.our_take|length > 349 %}
          tippy('#ourtake-button', {
            arrow: true,
            trigger: 'click',
            theme: 'light',
            html: '#allourtake',
            maxWidth: '690px'
          });
      {% endif %}
      

      //some counter script i ripped from https://codepen.io/hi-im-si/pen/uhxFn 
  	$('.counter').each(function() {
        var $this = $(this),
            countTo = $this.attr('data-count');

        $({ countNum: $this.text()}).animate({
          countNum: countTo
        },

        {

          duration: 300,
          easing:'swing',
          step: function() {
            $this.text(Math.floor(this.countNum));
          },
          complete: function() {
            $this.text(this.countNum);
          }
        });  
      });
  
  		//click to open tabs
      function openTab(evt, tabName) {
        var i, tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("tabcontent");
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
        }
        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" tab--active", "");
        }
        document.getElementById(tabName).style.display = "block";
        evt.currentTarget.className += " tab--active";
        
        //stops from scrolling to content
        var x = window.pageXOffset,
        y = window.pageYOffset;
   			$(window).one('scroll', function () {
       		 window.scrollTo(x, y);
        });
      };
  
  	{% if badgePage == true %}
		 		var isOpen = false;

        function popup() {
          //wraps blur
          //$('body').wrapInner('<div class=blur-all></div>');
          //shows overlay
          $('.popupoverlay').prependTo('body').fadeIn(200);
          isOpen = true;
        };

        function close() {
          $('.popupoverlay').fadeOut(100);
          $('body').css('overflow', 'visible');
          $('.header-container-wrapper').unwrap(); 
          isOpen = false;
        };

        //click to open
        $('.cta--grey, #open').click(function() {
          console.log('click');
          popup();
        });

        //escape to close
        $('body').keyup(function(e){
            if(e.which == 27){
                close();
            }
        });


        //click on close
        $('#close').click(function() {
          close();
        });

        //
        $('.popupform, #open').on('click', function(e) {
            e.stopPropagation();
        });

        $(document).on('click', function (e) {
            close();
        });
      
    {% endif %}
  
    $('.mobile-menu').click(function() {
      $('.tab-container').slideToggle();
    });
      
    </script>